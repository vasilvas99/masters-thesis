name: build-pdf
on:
  workflow_dispatch:
  workflow_call:
jobs:
  container-build-pdf:
    runs-on: ubuntu-latest
    container:
      image: thomasweise/docker-texlive-full:latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

    - name: Install python3 tools
      run: |
        sudo apt-get update
        sudo apt-get install -y --no-install-recommends python3 python3-pip python3-pexpect pylint 

      - name: Install pygments
        run: pip3 install Pygments
        
      - name: Build PDF
        run: latexmk
        
      - name: Upload PDF
        uses: actions/upload-artifact@v3
        with: 
          name: main.pdf
          if-no-files-found: error
          path: main.pdf