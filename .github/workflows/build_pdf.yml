name: build-pdf
on:
  workflow_dispatch:
  workflow_call:
  push:
    branches: [ main ]
jobs:
  container-build-pdf:
    runs-on: ubuntu-latest
    container:
      image: arkark/latexmk:full
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Install python3 tools
        run: |
          apt-get update
          apt-get install -y --no-install-recommends python3 python3-pip python3-pexpect pylint 

      - name: Install pygments
        run: pip3 install Pygments
        
      - name: Build PDF
        run: latexmk && latexmk && latexmk
        
      - name: Upload PDF
        uses: actions/upload-artifact@v3
        with: 
          name: main.pdf
          if-no-files-found: error
          path: main.pdf
